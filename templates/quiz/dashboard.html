{% extends 'base.html' %}
{% load quiz_filters %}

{% block content %}


<h3 class="mb-4">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</h3>

<div class="alert alert-orange">Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ <b>{{request.user.first_name}}</b> Ø¹Ø²ÛŒØ² ðŸ¥°

</div>

<div class="row mb-5 mt-4">
    <div class="col-md-4">
        <div class="card text-center rounded-4">
            <div class="card-body">
                <h5 class="card-title">ØªØ¹Ø¯Ø§Ø¯ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</h5>
                <p class="card-text display-4">{{ total_quizzes_taken }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-center rounded-4">
            <div class="card-body">
                <h5 class="card-title">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù…ØªÛŒØ§Ø²Ø§Øª</h5>
                <p class="card-text display-4">{{ total_score }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-center rounded-4">
            <div class="card-body">
                <h5 class="card-title">Ø¹Ù…Ù„ÛŒØ§Øª</h5>
                <a href="{% url 'quiz:quiz_list' %}" class="btn btn-3d-orange">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§</a>
                <a href="{% url 'accounts:logout' %}" class="btn btn-3d-danger ">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…</a>
            </div>
        </div>
    </div>
</div>

<h2 class="mb-4">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§</h2>

{% if user_attempts %}
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Ø¹Ù†ÙˆØ§Ù† Ø¢Ø²Ù…ÙˆÙ†</th>
                <th>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹</th>
                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                <th>Ø§Ù…ØªÛŒØ§Ø²</th>
                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
            </tr>
        </thead>
        <tbody>
            {% for attempt in user_attempts %}
            <tr>
                <td>{{ attempt.quiz.title }}</td>
                <td>{{ attempt.start_time|jalali_date:"%Y/%m/%d Ø³Ø§Ø¹Øª %H:%M"  }}</td>
                <td>
                    {% if attempt.completed %}
                    <span class="badge bg-success">ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</span>
                    {% else %}
                    <span class="badge bg-warning text-dark">Ù†Ø§ØªÙ…Ø§Ù…</span>
                    {% endif %}
                </td>
                <td>{{ attempt.score }}</td>
                <td>
                    {% if attempt.completed %}
                    <a href="{% url 'quiz:quiz_results' attempt.id %}" class="btn btn-sm btn-3d-orange">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù†ØªØ§ÛŒØ¬</a>
                    {% else %}
                    <a href="{% url 'quiz:quiz_attempt' attempt.id %}" class="btn btn-sm btn-3d-warning">Ø§Ø¯Ø§Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ†</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info">
    Ø´Ù…Ø§ Ù‡Ù†ÙˆØ² Ø¯Ø± Ù‡ÛŒÚ† Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ø´Ø±Ú©Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.
</div>
{% endif %}
{% endblock %}